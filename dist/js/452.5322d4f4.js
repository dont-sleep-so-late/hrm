"use strict";(self["webpackChunkGDUOHRM"]=self["webpackChunkGDUOHRM"]||[]).push([[452],{6452:function(e,t,s){s.r(t),s.d(t,{default:function(){return d}});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"PaySalaryDetail"},[t("el-card",[t("el-row",{attrs:{type:"flex",justify:"space-between"}},[t("el-form",{ref:"queryInfo",staticClass:"demo-form-inline",attrs:{model:e.queryInfo,size:"small",inline:""}},[t("div",{staticClass:"block"},[t("el-form-item",[t("el-date-picker",{attrs:{type:"datetimerange","start-placeholder":"开始日期",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss","end-placeholder":"结束日期","default-time":["00:00:00"]},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}}),t("el-button",{attrs:{size:"small",icon:"el-icon-search"},on:{click:function(t){return e.getSalaryListByTime()}}},[e._v("查询")])],1)],1)])],1),t("el-table",{attrs:{data:e.salaryDetailList,border:"",stripe:""}},[t("el-table-column",{attrs:{type:"index",label:"编号",width:"100","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"f_name",label:"制定人姓名","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"username",label:"受理人姓名","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"o3_name",label:"薪资标准","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"profession",label:"职位名称","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"allmoney",label:"总薪资","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"create_time",label:"创建时间","show-overflow-tooltip":""}})],1),t("el-pagination",{attrs:{"current-page":e.queryInfo.pagenum,"page-sizes":[10,20,50,100],"page-size":e.queryInfo.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChanged,"current-change":e.handleCurrentChange}})],1)],1)},i=[],o={name:"PaySalaryDetail",data(){return{queryInfo:{query:"",pagenum:0,pagesize:10},salaryDetailList:[],total:0,value1:"",addDialogVisible:!1,addForm:{username:"",password:"",email:"",mobile:""},addFormRules:{username:[{required:!0,message:"请输入职位名",trigger:"blur"},{min:2,max:10,message:"用户名的长度在2~10个字符之间",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:15,message:"用户名的长度在6~15个字符之间",trigger:"blur"}]},editDialogVisible:!1,editForm:{},setRolesDialogVisible:!1,userInfo:{},rolesList:[],selectedRoleId:""}},methods:{async getSalaryList(){const{data:e}=await this.$http.post(`/Sal/give/giveSalAllInfo/${this.queryInfo.pagenum}/${this.queryInfo.pagesize}`);this.salaryDetailList=e.data,this.total=0,e.data.forEach((()=>{this.total++}))},async getSalaryListByTime(){if(console.log(this.value1),null!=this.value1){this.queryInfo.pagenum=0;const{data:e}=await this.$http.post(`/Sal/GiveAllInfoByTime?startTime=${this.value1[0]}&endTime=${this.value1[1]}&pageNum=${this.queryInfo.pagenum}&pageSize=${this.queryInfo.pagesize}`);this.salaryDetailList=e.data,this.total=0,e.data.forEach((()=>{this.total++}))}else this.getSalaryList()},handleSizeChanged(e){this.queryInfo.pagesize=e,this.getSalaryList()},handleCurrentChange(e){console.log(this.queryInfo.pagenum),this.queryInfo.pagenum=e-1,this.getSalaryList()},async userStateChanged(e){const{data:t}=await this.$http.put(`users/${e.id}/state/${e.mg_state}`);if(200!==t.meta.status)return e.mg_state=!e.mg_state,this.$message.error("更新用户状态失败！");this.$message.success("更新用户状态成功！")},addDialogClosed(){this.$refs.addFormRef.resetFields()},addUser(){this.$refs.addFormRef.validate((async e=>{if(!e)return;const{data:t}=await this.$http.post(`/Sys/position/insertProfession?profession=${this.addForm.username}`);this.$message.success("添加用户成功!"),this.addDialogVisible=!1,this.getSalaryList()}))},async showEditDialog(e){this.editDialogVisible=!0,window.sessionStorage.setItem("id",e);const{data:t}=await this.$http.get("users/"+e);if(200!==t.meta.status)return this.$message.error("查询用户信息失败！");this.editForm=t.data},editDialogClosed(){this.$refs.editFormRef.resetFields()},editUserInfo(){this.$refs.editFormRef.validate((async e=>{if(!e)return;const{data:t}=await this.$http.post(`/Sys/position/updateProfessionByPid?profession=${this.editForm.username}&pId=${window.sessionStorage.getItem("id")}`);this.editDialogVisible=!1,this.getSalaryList(),this.$message.success("更新用户信息成功！")}))},async removeUserById(e){const t=await this.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((e=>e));if("confirm"!==t)return this.$message.info("已取消删除");const{data:s}=await this.$http.post(`/Sys/position/deleteProfessionByPid?pId=${e}`);this.$message.success("删除用户成功！"),this.getSalaryList()},async setRole(e){this.userInfo=e;const{data:t}=await this.$http.get("roles");if(200!==t.meta.status)return this.$message.error("获取角色列表失败！");this.rolesList=t.data,this.setRolesDialogVisible=!0},async saveRoleInfo(){if(!this.selectedRoleId)return this.$message.error("请选择要分配的角色!");const{data:e}=await this.$http.put(`users/${this.userInfo.id}/role`,{rid:this.selectedRoleId});if(200!==e.meta.status)return this.$message.error("更新角色失败！");this.$message.success("更新角色成功！"),this.getSalaryList(),this.setRolesDialogVisible=!1},setRoleDialogClosed(){this.selectedRoleId="",this.userInfo={}}},created(){this.getSalaryList()}},l=o,r=s(1001),n=(0,r.Z)(l,a,i,!1,null,"3b5908cb",null),d=n.exports}}]);
//# sourceMappingURL=452.5322d4f4.js.map