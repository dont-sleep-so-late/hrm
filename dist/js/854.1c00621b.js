"use strict";(self["webpackChunkGDUOHRM"]=self["webpackChunkGDUOHRM"]||[]).push([[854],{6854:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"SalaryQuery"},[t("el-card",[t("el-row",{attrs:{type:"flex",justify:"space-between"}},[t("el-form",{staticClass:"demo-form-inline",attrs:{size:"small",inline:""}},[t("el-form-item",{attrs:{label:"薪资标准:"}},[t("el-input",{attrs:{clearable:"",placeholder:"请输入薪资标准"},model:{value:e.queryInfo.query1,callback:function(t){e.$set(e.queryInfo,"query1","string"===typeof t?t.trim():t)},expression:"queryInfo.query1"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getUserListByName1},slot:"append"})],1)],1),t("el-form-item",{attrs:{label:"登记人查询:"}},[t("el-input",{attrs:{clearable:"",placeholder:"请输入登记人查询"},model:{value:e.queryInfo.query3,callback:function(t){e.$set(e.queryInfo,"query3","string"===typeof t?t.trim():t)},expression:"queryInfo.query3"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getUserListByName3},slot:"append"})],1)],1)],1)],1),t("el-table",{attrs:{data:e.detailForm,border:""}},[t("el-table-column",{attrs:{type:"index",label:"编号",width:"100","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"o3Name",label:"薪资标准","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"pname",label:"职位名称","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"fname",label:"姓名","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"username",label:"登记人","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"allmoney",label:"总薪资","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"createTime",label:"创建时间","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"success",icon:"el-icon-zoom-in",size:"mini"},on:{click:function(t){return e.showEditDialog(a.row.sid)}}})]}}])})],1),t("el-pagination",{attrs:{"current-page":e.queryInfo.pagenum,"page-sizes":[5,10,20,50],"page-size":e.queryInfo.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChanged,"current-change":e.handleCurrentChange}}),t("el-dialog",{attrs:{title:"详情页面",visible:e.editDialogVisible,width:"50%"},on:{"update:visible":function(t){e.editDialogVisible=t}}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:8}}),t("el-form",{attrs:{model:e.detailForm,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"制定人"}},[t("el-input",{attrs:{disabled:""},model:{value:e.detailForm.fname,callback:function(t){e.$set(e.detailForm,"fname",t)},expression:"detailForm.fname"}})],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"薪酬标准名称"}},[t("el-input",{attrs:{disabled:""},model:{value:e.detailForm.o3Name,callback:function(t){e.$set(e.detailForm,"o3Name",t)},expression:"detailForm.o3Name"}})],1),t("el-form-item",{attrs:{label:"薪酬标准编号"}},[t("el-input",{attrs:{disabled:""},model:{value:e.detailForm.sid,callback:function(t){e.$set(e.detailForm,"sid",t)},expression:"detailForm.sid"}})],1),t("el-form-item",{attrs:{label:"登记人"}},[t("el-input",{attrs:{disabled:""},model:{value:e.detailForm.username,callback:function(t){e.$set(e.detailForm,"username",t)},expression:"detailForm.username"}})],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{label:"薪酬总额"}},[t("el-input",{attrs:{disabled:""},model:{value:e.detailForm.allmoney,callback:function(t){e.$set(e.detailForm,"allmoney",t)},expression:"detailForm.allmoney"}})],1),t("el-form-item",{attrs:{label:"登记时间"}},[t("el-input",{attrs:{disabled:""},model:{value:e.detailForm.createTime,callback:function(t){e.$set(e.detailForm,"createTime",t)},expression:"detailForm.createTime"}})],1),t("el-form-item",{attrs:{label:"基本工资"}},[t("el-input",{attrs:{disabled:""},model:{value:e.detailForm.basic,callback:function(t){e.$set(e.detailForm,"basic",t)},expression:"detailForm.basic"}})],1)],1)],1),t("el-form",{attrs:{"label-width":"100px"}},e._l(e.detailForm.items,(function(a){return t("el-form-item",{key:a.id,attrs:{label:a.name}},[t("el-input",{attrs:{disabled:""},model:{value:a.value,callback:function(t){e.$set(a,"value",t)},expression:"item.value"}})],1)})),1)],1)],1)],1)],1)},i=[],o={name:"SalaryQuery",data(){return{catelist:[],cateProps:{value:"o3_id",label:"o3_name",children:"children",expandTrigger:"hover"},queryInfo:{query1:"",query2:"",query3:"",query4:"",pagenum:1,pagesize:10},total:0,addDialogVisible:!1,detailForm:[],editDialogVisible:!1,addCateDialogVisiblethree:!1,addCateDialogVisibletwo:!1,setRolesDialogVisible:!1,userInfo:{},rolesList:[],selectedRoleId:"",parentCateList:[],cascaderProps:{value:"o1_id",label:"o1_name",children:"children",expandTrigger:"hover"},selectedKeys:"",parentCateListthree:[],cascaderPropsthree:{value:"o2_id",label:"o2_name",children:"children",expandTrigger:"hover"},selectedKeysthree:"",time1:""}},watch:{time1(e,t){this.editForm1.time2=.1*e,this.editForm1.time3=.1*e,this.editForm1.time4=.1*e,this.editForm1.time5=.08*e,this.editForm1.time6=.005*e,this.editForm1.time7=.02*e+3,this.editForm1.time8=.08*e,this.editForm.money=this.editForm1.time2+this.editForm1.time3+this.editForm1.time4+this.editForm1.time5+this.editForm1.time6+this.editForm1.time7+this.editForm1.time8+(this.time1-0)}},methods:{async parentCateChangedtwo(){console.log(555);const{data:e}=await this.$http.post(`/Sys/organ/queryOrgan2/${this.selectedKeys}`);this.parentCateListthree=e.data},async getSalaryList(){this.queryInfo.pagenum=0;const{data:e}=await this.$http.post(`/Sal/listSelect?pageNum=${this.queryInfo.pagenum}&pageSize=${this.queryInfo.pagesize}`);this.detailForm=e.data,this.total=0,e.data.forEach((()=>{this.total++}));const{data:t}=await this.$http.post("/Sys/organ/queryOrgan1");this.parentCateList=t.data},addCate(){this.$refs.addCateFormRef.validate((async e=>{if(!e)return;const{data:t}=await this.$http.post(`/Sys/organ/insertOrgan2?o1Id=${this.selectedKeys}&o2Name=${this.addCateForm.cat_name}`);this.$message.success("添加分类成功！"),this.addCateDialogVisibletwo=!1}))},addCatethree(){this.$refs.addCateFormRef.validate((async e=>{if(!e)return;const{data:t}=await this.$http.post(`/Sys/organ/insertOrgan3?o2Id=${this.selectedKeysthree}&o3Name=${this.addCateFormthree.cat_name}`);this.$message.success("添加分类成功！"),this.addCateDialogVisiblethree=!1}))},async getParentCateList(){const{data:e}=await this.$http.post("/Sys/organ/queryOrgan1");this.parentCateList=e.data,this.parentCateListthree=res2.data},async getUserListByName1(){this.queryInfo.pagenum=0;const{data:e}=await this.$http.post(`/Sal/listBy03Name?pageNum=${this.queryInfo.pagenum}&pageSize=${this.queryInfo.pagesize}&o3name=${this.queryInfo.query1}`);this.total=0,e.data?(this.detailForm=e.data,e.data.forEach((()=>{this.total++}))):this.detailForm=[],""==this.queryInfo.query1&&this.getSalaryList()},async getUserListByName2(){this.queryInfo.pagenum=0;const{data:e}=await this.$http.post(`/File/query/showFileSelectByOrgan2/${this.queryInfo.pagenum}/${this.queryInfo.pagesize}/${this.queryInfo.query2}`);console.log(e.data),this.detailForm=e.data,this.total=0,e.data.forEach((()=>{this.total++}))},async getUserListByName3(){this.queryInfo.pagenum=0;const{data:e}=await this.$http.post(`/Sal/listByUser?pageNum=${this.queryInfo.pagenum}&pageSize=${this.queryInfo.pagesize}&username=${this.queryInfo.query3}`);this.total=0,e.data?(this.detailForm=e.data,e.data.forEach((()=>{this.total++}))):this.detailForm=[],""==this.queryInfo.query3&&this.getSalaryList()},async getUserListByName4(){this.queryInfo.pagenum=0;const{data:e}=await this.$http.post(`/File/query/showFileSelectByProfession/${this.queryInfo.pagenum}/${this.queryInfo.pagesize}/${this.queryInfo.query4}`);console.log(e.data),this.detailForm=e.data,this.total=8},handleSizeChanged(e){this.queryInfo.pagesize=e,this.getSalaryList()},handleCurrentChange(e){console.log(6),this.queryInfo.pagenum=e,this.getSalaryList()},async userStateChanged(e){const{data:t}=await this.$http.put(`users/${e.id}/state/${e.mg_state}`);if(200!==t.meta.status)return e.mg_state=!e.mg_state,this.$message.error("更新用户状态失败！");this.$message.success("更新用户状态成功！")},addDialogClosed(){this.$refs.addFormRef.resetFields()},addUser(){this.$refs.addFormRef.validate((async e=>{if(!e)return;const{data:t}=await this.$http.post(`/Sys/organ/insertOrgan1?o1Name=${this.addForm.username}`);this.$message.success("添加用户成功!"),this.addDialogVisible=!1,this.getSalaryList()}))},async showEditDialog(e){this.editDialogVisible=!0,window.sessionStorage.setItem("id",e);const{data:t}=await this.$http.post("/Sal/showSalInfoBySid/"+e);this.detailForm=t.data,""==this.editForm.image&&(this.editForm.image="http://rluc5ispc.hn-bkt.clouddn.com/2022/12/18/9d51d40e5e2740b9b285c4b22d1af6af.jpg")},editDialogClosed(){this.editDialogVisible=!1},editUserInfo(){this.$refs.editFormRef.validate((async e=>{if(!e)return;const{data:t}=await this.$http.put("users/"+this.editForm.id,{email:this.editForm.email,mobile:this.editForm.mobile});if(200!==t.meta.status)return this.$message.error("更新用户信息失败！");this.editDialogVisible=!1,this.getSalaryList(),this.$message.success("更新用户信息成功！")}))},async removeUserById(e){const t=await this.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((e=>e));if("confirm"!==t)return this.$message.info("已取消删除");const{data:a}=await this.$http.post(`/Sys/organ/deleteOrgan3/${e}`);this.$message.success("删除用户成功！"),this.getSalaryList()},async setRole(e){this.userInfo=e;const{data:t}=await this.$http.get("roles");if(200!==t.meta.status)return this.$message.error("获取角色列表失败！");this.rolesList=t.data,this.setRolesDialogVisible=!0},async saveRoleInfo(){if(!this.selectedRoleId)return this.$message.error("请选择要分配的角色!");const{data:e}=await this.$http.put(`users/${this.userInfo.id}/role`,{rid:this.selectedRoleId});if(200!==e.meta.status)return this.$message.error("更新角色失败！");this.$message.success("更新角色成功！"),this.getSalaryList(),this.setRolesDialogVisible=!1},setRoleDialogClosed(){this.selectedRoleId="",this.userInfo={}}},created(){},mounted(){this.getSalaryList()}},r=o,l=a(1001),n=(0,l.Z)(r,s,i,!1,null,"43d360a7",null),d=n.exports}}]);
//# sourceMappingURL=854.1c00621b.js.map