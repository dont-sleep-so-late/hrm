"use strict";(self["webpackChunkGDUOHRM"]=self["webpackChunkGDUOHRM"]||[]).push([[371],{5371:function(e,s,t){t.r(s),t.d(s,{default:function(){return c}});var r=function(){var e=this,s=e._self._c;return s("div",{staticClass:"login"},[s("div",{staticClass:"container",class:{container_active:e.registerFlag}},[e._m(0),s("div",{staticClass:"right"},[s("div",{directives:[{name:"show",rawName:"v-show",value:!e.registerFlag,expression:"!registerFlag"}],staticClass:"form-items",class:{loginClassFlag:!e.registerFlag}},[s("el-form",{ref:"loginFormRef",attrs:{model:e.loginForm,rules:e.loginFormRules}},[s("div",{staticClass:"input_lable"},[s("h1",[e._v("用户名")]),s("el-form-item",{attrs:{prop:"username"}},[s("el-input",{attrs:{placeholder:"请输入账号"},model:{value:e.loginForm.username,callback:function(s){e.$set(e.loginForm,"username",s)},expression:"loginForm.username"}})],1)],1),s("div",{staticClass:"input_lable"},[s("h1",[e._v("密码")]),s("el-form-item",{attrs:{prop:"password"}},[s("el-input",{attrs:{placeholder:"请输入密码","show-password":""},model:{value:e.loginForm.password,callback:function(s){e.$set(e.loginForm,"password",s)},expression:"loginForm.password"}})],1)],1),s("div",{staticClass:"btn_lable"},[s("el-button",{attrs:{type:"primary"},on:{click:function(s){return e.login()}}},[e._v("登录")])],1),s("div",{staticClass:"remember_forget"},[s("el-checkbox",{model:{value:e.checked,callback:function(s){e.checked=s},expression:"checked"}},[e._v("记住密码")]),s("p",{on:{click:function(s){return e.reset()}}},[e._v("重置")])],1)])],1),s("div",{directives:[{name:"show",rawName:"v-show",value:e.registerFlag,expression:"registerFlag"}],staticClass:"form-items"},[s("el-form",{ref:"ReFormData",attrs:{model:e.ReFormData,rules:e.ReFormRules}},[s("div",{staticClass:"input_lable"},[s("h1",[e._v("用户名")]),s("el-form-item",{attrs:{prop:"username"}},[s("el-input",{attrs:{placeholder:"请输入账号"},model:{value:e.ReFormData.username,callback:function(s){e.$set(e.ReFormData,"username",s)},expression:"ReFormData.username"}})],1)],1),s("div",{staticClass:"input_lable"},[s("h1",[e._v("密码")]),s("el-form-item",{attrs:{prop:"password"}},[s("el-input",{attrs:{placeholder:"请输入密码","show-password":""},model:{value:e.ReFormData.password,callback:function(s){e.$set(e.ReFormData,"password",s)},expression:"ReFormData.password"}})],1)],1),s("div",{staticClass:"input_lable"},[s("h1",[e._v("角色选择")]),s("el-form-item",{attrs:{prop:"password"}},[s("el-select",{staticStyle:{width:"400px"},attrs:{placeholder:"请选择"},model:{value:e.selectedRoleId,callback:function(s){e.selectedRoleId=s},expression:"selectedRoleId"}},e._l(e.userInfo,(function(e){return s("el-option",{key:e.r_id,attrs:{label:e.role_name,value:e.r_id}})})),1)],1)],1),s("div",{staticClass:"btn_lable"},[s("el-button",{on:{click:function(s){e.registerFlag=!e.registerFlag}}},[e._v("返回")]),s("el-button",{attrs:{type:"primary"},on:{click:function(s){return e.register()}}},[e._v("注册")])],1)])],1)])])])},a=[function(){var e=this,s=e._self._c;return s("div",{staticClass:"left"},[s("div",{staticClass:"header_logo"},[s("div",{staticClass:"_logo"},[s("img",{attrs:{src:t(1468)}})]),s("div",{staticClass:"_title"},[s("h2",[e._v("人力资源管理系统")]),s("p",[e._v("GDOU-HRM")])])]),s("div",{staticClass:"big_logo"}),s("div",{staticClass:"foot_logo"},[s("div",{staticClass:"foot_title"},[s("h2",[e._v("广东海洋大学")]),s("p",[e._v("GDOU")])])])])}],o=(t(7658),{name:"Login",data(){return{checked:!1,registerFlag:!1,loginForm:{username:"",password:""},userInfo:[],loginFormRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:10,message:"长度在 3 到 10 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:15,message:"长度在 6 到 15 个字符",trigger:"blur"}]},ReFormData:{username:"",password:""},ReFormRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:10,message:"长度在 3 到 10 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:15,message:"长度在 6 到 15 个字符",trigger:"blur"}]},selectedRoleId:""}},created(){this.getUserInfo(),this.checkremberpassword()},methods:{checkremberpassword(){this.checked=window.localStorage.getItem("checked"),"true"==this.checked&&(this.checked=!0),1==this.checked?(this.loginForm.username=window.localStorage.getItem("username"),this.loginForm.password=window.localStorage.getItem("password")):window.localStorage.clear()},login(){this.$refs.loginFormRef.validate((async e=>{if(!e)return;const{data:s}=await this.$http.post(`/Sys/login?username=${this.loginForm.username}&password=${this.loginForm.password}`);if(!0!==s.ok)return this.$message.error("登录失败!");this.$message.success("登录成功！"),window.sessionStorage.setItem("token",s.data.token),window.sessionStorage.setItem("uid",s.data[0].u_id),window.localStorage.clear(),window.localStorage.setItem("checked",this.checked),window.localStorage.setItem("username",this.loginForm.username),window.localStorage.setItem("password",this.loginForm.password),this.$router.push("/Banner")}))},register(){this.loginForm.r_id=this.selectedRoleId,this.$refs.ReFormData.validate((async e=>{if(!e)return;const{data:s}=await this.$http.post(`/Sys/register/${this.ReFormData.username}/${this.ReFormData.password}/${this.selectedRoleId}`);console.log(s),this.$message.success("注册成功！"),this.$refs.ReFormData=[],this.registerFlag=!this.registerFlag}))},reset(){this.loginForm.username="",this.loginForm.password=""},async getUserInfo(){const{data:e}=await this.$http.post("Sys/register/queryAllRole");console.log(e),this.userInfo=e.data}}}),i=o,l=t(1001),n=(0,l.Z)(i,r,a,!1,null,"676ce2f7",null),c=n.exports},1468:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAApCAYAAABdnotGAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAHgSURBVFiF7VcxUsMwEFxlMkM6/ANc0sETUtJBS5U8gR/wlDwl/IDQ0UXpUjCT0EHBLI3tkc/yWTJyzDBsZZ1WuvXltFYAD0jOSa5JHkg+k3z08U4Ckkv6sR5L0LZFEEnOh84/EWLmAHKFfzukGEAI+g2QgjYAjgr/ZUAtfpB8aOmf7cnFCFFlcx9IrkhmowlyhOVjaxgdxh2QvAFw1cL9RLPhMwBnxfMbgC9nzhpjnsT+d8UaHxp8FJ+LVFjJjB37r4DmsU/ZuNYTy7v4UpC2IBbvnpi2/w5wBBXHOmWFNu4gwDZsTRDSVgdoHoDrEL4rKLXxWTEet0LGGFkhbf9jyZ86wQtlwR7AvYgtACxb+BtP7FzZ35YPrqBcWfDqMbmFwvfdGLQeqvihP5kvgca3npjWQxU/tKl7J3CQxwrSFuwiE/QyxUpQgClad9CTr6HilxXKOxbEHOEf8UtBwW8QyJfHPm2FjDFSUBc/6rPh8ktBmilKMX34minWqlkaY8ojnLH5t/tS4deqWQoKctFQQQDmyryEdQchTW09scFuliFNHWuKsaiZaHSFhr5ZTkgG3eQc5AnFNPafIL0pxqK2/7RIIJNW8Jiiy88AzMT8XoxnaL7EB4rKeEz0H//4W/gG6k1hGgB+GugAAAAASUVORK5CYII="}}]);
//# sourceMappingURL=371.71bccc67.js.map