"use strict";(self["webpackChunkGDUOHRM"]=self["webpackChunkGDUOHRM"]||[]).push([[926],{1926:function(e,t,s){s.r(t),s.d(t,{default:function(){return d}});var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"ProfessionManage"},[t("el-card",[t("el-row",{attrs:{type:"flex",justify:"space-between"}},[t("el-form",{staticClass:"demo-form-inline",attrs:{size:"small",inline:""}},[t("el-form-item",[t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.queryInfo.query,callback:function(t){e.$set(e.queryInfo,"query","string"===typeof t?t.trim():t)},expression:"queryInfo.query"}})],1),t("el-form-item",[t("el-button",{attrs:{size:"small",icon:"el-icon-search"},on:{click:function(t){return e.getUserListByName()}}},[e._v("查询")]),t("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.addDialogVisible=!0}}},[e._v("添加职位")])],1)],1)],1),t("el-table",{ref:"table",attrs:{data:e.userlist,border:""}},[t("el-table-column",{attrs:{type:"index",label:"编号",width:"100","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"profession",label:"职位名称","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(t){return e.showEditDialog(s.row.p_id)}}}),t("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(t){return e.removeUserById(s.row.p_id)}}})]}}])})],1),t("el-pagination",{attrs:{"current-page":e.queryInfo.pagenum,"page-sizes":[10,20,50,100],"page-size":e.queryInfo.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChanged,"current-change":e.handleCurrentChange}})],1),t("el-dialog",{attrs:{title:"添加职位",visible:e.addDialogVisible,width:"50%"},on:{"update:visible":function(t){e.addDialogVisible=t},close:e.addDialogClosed}},[t("el-form",{ref:"addFormRef",attrs:{model:e.addForm,rules:e.addFormRules,"label-width":"70px"}},[t("el-form-item",{attrs:{label:"职位名",prop:"username"}},[t("el-input",{model:{value:e.addForm.username,callback:function(t){e.$set(e.addForm,"username",t)},expression:"addForm.username"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.addUser}},[e._v("确 定")])],1)],1),t("el-dialog",{attrs:{title:"修改用户",visible:e.editDialogVisible,width:"50%"},on:{"update:visible":function(t){e.editDialogVisible=t},close:e.editDialogClosed}},[t("el-form",{ref:"editFormRef",attrs:{model:e.editForm,"label-width":"70px"}},[t("el-form-item",{attrs:{label:"职位名称"}},[t("el-input",{model:{value:e.editForm.username,callback:function(t){e.$set(e.editForm,"username",t)},expression:"editForm.username"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.editUserInfo}},[e._v("确 定")])],1)],1)],1)},o=[],a={name:"ProfessionManage",data(){return{queryInfo:{query:"",pagenum:0,pagesize:10},userlist:[],total:0,addDialogVisible:!1,addForm:{username:"",password:"",email:"",mobile:""},addFormRules:{username:[{required:!0,message:"请输入职位名",trigger:"blur"},{min:2,max:10,message:"用户名的长度在2~10个字符之间",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:15,message:"用户名的长度在6~15个字符之间",trigger:"blur"}]},editDialogVisible:!1,editForm:{},setRolesDialogVisible:!1,userInfo:{},rolesList:[],selectedRoleId:""}},methods:{async getProfessionList(){const{data:e}=await this.$http.post(`/Sys/position/queryAllProfession/${this.queryInfo.pagenum}/${this.queryInfo.pagesize}`);this.userlist=e.data,this.total=0;const{data:t}=await this.$http.post("/Sys/position/queryAllProfession/0/1000");t.data.forEach((()=>{this.total++}))},async getUserListByName(){if(""==this.queryInfo.query)this.getProfessionList();else{this.queryInfo.pagenum=0;const{data:e}=await this.$http.post(`/Sys/position/queryProfessionByProfession/${this.queryInfo.query}/${this.queryInfo.pagenum}/${this.queryInfo.pagesize}`);this.userlist=e.data,this.total=0,e.data.forEach((()=>{this.total++}))}},handleSizeChanged(e){this.queryInfo.pagesize=e,this.getProfessionList()},handleCurrentChange(e){console.log(this.queryInfo.pagenum),this.queryInfo.pagenum=e,this.getProfessionList()},addDialogClosed(){this.$refs.addFormRef.resetFields()},addUser(){this.$refs.addFormRef.validate((async e=>{if(!e)return;const{data:t}=await this.$http.post(`/Sys/position/insertProfession?profession=${this.addForm.username}`);this.$message.success("添加用户成功!"),this.addDialogVisible=!1,this.getProfessionList()}))},async showEditDialog(e){this.editDialogVisible=!0,window.sessionStorage.setItem("id",e)},editDialogClosed(){this.$refs.editFormRef.resetFields()},editUserInfo(){this.$refs.editFormRef.validate((async e=>{if(!e)return;const{data:t}=await this.$http.post(`/Sys/position/updateProfessionByPid?profession=${this.editForm.username}&p_id=${window.sessionStorage.getItem("id")}`);this.editDialogVisible=!1,this.getProfessionList(),this.$message.success("更新用户信息成功！")}))},async removeUserById(e){const t=await this.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((e=>e));if("confirm"!==t)return this.$message.info("已取消删除");const{data:s}=await this.$http.post(`/Sys/position/deleteProfessionByPid?pId=${e}`);this.$message.success("删除用户成功！"),this.getProfessionList()}},created(){this.getProfessionList()}},r=a,n=s(1001),l=(0,n.Z)(r,i,o,!1,null,"4618f5a4",null),d=l.exports}}]);
//# sourceMappingURL=926.daff5c23.js.map